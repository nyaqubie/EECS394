<!DOCTYPE html> 
<html> 
	<head> 
		<title>Event Tracker</title> 
		
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<link rel="stylesheet" href="styles/jquery.mobile-1.0rc2.min.css" />
		
		<script type="text/javascript" charset="utf-8" src="phonegap-1.1.0.js"></script>
		<script type="text/javascript" src="lib/jquery/jquery-1.6.4.min.js"></script>
		<script type="text/javascript" src="lib/jquery/jquery.mobile-1.0rc2.min.js"></script>	
		<script type="text/javascript" charset="utf-8" src="app.js"></script>
	</head> 
	
	<body> 
		<div data-role="page" id="index" data-theme="b">
			<div data-role="header" id='header' data-theme="a">
				<h1>Events</h1>
				<a href="index.html" rel='external' data-role='button'>Back</a>
			</div>
			
			<ul data-role = "listview" data" data inset = "true">
			<script type="text/javascript">
				$.ajax({
					url: 'http://69.164.198.224/getevents',
					type: 'GET',
					dataType: 'jsonp',
					jsonp: 'jsoncallback',
					timeout: 10000,
					success: function(data, status){
						for (var i = 0; i<data.length; i++){
							var link = document.createElement('a');
							link.setAttribute('href','event.html?eventid='+data[i][0])
							link.appendChild(document.createTextNode(data[i][1] + " " + data[i][2]));
							$("#footer").before(link);	//add the link before the footer
							$("html").trigger('create')	//needed to apply jqmobile style changes on dynamic content
						}
					},
					error: function(){
						alert('bad')
					}
				});
			</script>
			
			</ul>
			
			<div data-role="footer" id="footer" data-theme="a">
				<h4>Footer</h4>
			</div>
		</div>
	</body>
	
</html>